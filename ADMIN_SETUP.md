# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–∏–∂–Ω–æ–≥–æ –∫–ª—É–±–∞

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Ç–µ—Ä–∞—Ü–∏—è–º–∏ –∫–Ω–∏–∂–Ω–æ–≥–æ –∫–ª—É–±–∞:

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω–∞:
- üî• **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π** —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –¥–µ–¥–ª–∞–π–Ω–æ–≤
- ‚ñ∂Ô∏è **–û—Ç–∫—Ä—ã—Ç–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è** –ø–æ –∫–Ω–∏–≥–∞–º-–∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º
- ‚èπÔ∏è **–ó–∞–∫—Ä—ã—Ç–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–π** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–Ω–æ–Ω—Å–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚è∞ **–£—Å—Ç–∞–Ω–æ–≤–∫–∞/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–µ–¥–ª–∞–π–Ω–æ–≤** –¥–ª—è –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏—è
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –∏—Ç–µ—Ä–∞—Ü–∏–π –∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ü§ñ **–ê–≤—Ç–æ-–∑–∞–∫—Ä—ã—Ç–∏–µ** –∏—Ç–µ—Ä–∞—Ü–∏–π –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –¥–µ–¥–ª–∞–π–Ω–∞
- üì¢ **–ê–≤—Ç–æ-–∞–Ω–Ω–æ–Ω—Å** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Telegram –∫–∞–Ω–∞–ª —Å –æ–±–ª–æ–∂–∫–æ–π –∫–Ω–∏–≥–∏-–ø–æ–±–µ–¥–∏—Ç–µ–ª—è
- üîÑ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–¥–ª–∞–π–Ω–æ–≤** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

–ß—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å `admin` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```sql
-- –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
SELECT * FROM "User" WHERE "tgUserId" = 'TELEGRAM_USER_ID';

-- –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å admin
UPDATE "User" 
SET roles = array_append(roles, 'admin') 
WHERE "tgUserId" = 'TELEGRAM_USER_ID';

-- –ò–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç—å —Ä–æ–ª–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞)
UPDATE "User" 
SET roles = '{"admin"}' 
WHERE "tgUserId" = 'TELEGRAM_USER_ID';
```

### 2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ –∫–æ–¥

–ú–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –≤ auth.service.ts –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∞–≤:

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ—Ç–æ–¥ validateTelegramData –≤ auth.service.ts
if (user.tgUserId === 'YOUR_TELEGRAM_USER_ID') {
  user.roles = ['admin'];
  await this.prisma.user.update({
    where: { id: user.id },
    data: { roles: ['admin'] }
  });
}
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Telegram-–±–æ—Ç–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–Ω–æ–Ω—Å–æ–≤ –≤ –∫–∞–Ω–∞–ª –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å —É @BotFather)
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# ID –∫–∞–Ω–∞–ª–∞ –∏–ª–∏ @username –∫–∞–Ω–∞–ª–∞ –¥–ª—è –∞–Ω–Ω–æ–Ω—Å–æ–≤
TELEGRAM_CHANNEL_ID=@your_channel_username
# –ò–ª–∏ —á–∏—Å–ª–æ–≤–æ–π ID: TELEGRAM_CHANNEL_ID=-1001234567890
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞:
1. –ù–∞–π—Ç–∏ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/newbot`
3. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `.env`

### –ü–æ–ª—É—á–µ–Ω–∏–µ ID –∫–∞–Ω–∞–ª–∞:
1. –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–∞–Ω–∞–ª–∞
2. –î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @username –∫–∞–Ω–∞–ª–∞ –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å —á–∏—Å–ª–æ–≤–æ–π ID —á–µ—Ä–µ–∑:
   - –ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –±–æ—Ç—É @userinfobot
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API: `https://api.telegram.org/bot<TOKEN>/getUpdates`

## –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

1. **–í –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**: –≤ –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ê–¥–º–∏–Ω"
2. **URL**: `/admin` - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤**: —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏**: 
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–î–µ–∫–∞–±—Ä—å 2024"
   - –î–µ–¥–ª–∞–π–Ω: 31.12.2024 23:59

2. **–û—Ç–∫—Ä—ã—Ç–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è**: –∫–Ω–æ–ø–∫–∞ "üü¢ –û—Ç–∫—Ä—ã—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ"

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ**: —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –∑–∞–∫—Ä–æ–µ—Ç 31.12.2024 –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –∞–Ω–Ω–æ–Ω—Å –≤ –∫–∞–Ω–∞–ª

4. **–§–æ—Ä–º–∞—Ç –∞–Ω–Ω–æ–Ω—Å–∞**:
   ```
   üìö –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è "–î–µ–∫–∞–±—Ä—å 2024"

   üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏"
   ‚úçÔ∏è –ê–≤—Ç–æ—Ä: –ò–º—è –ê–≤—Ç–æ—Ä–∞
   üë§ –ü—Ä–µ–¥–ª–æ–∂–∏–ª: @username
   üó≥Ô∏è –ì–æ–ª–æ—Å–æ–≤: 15
   ```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ `admin` –Ω–∞ –±—ç–∫–µ–Ω–¥–µ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∞–¥–º–∏–Ω—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–õ–æ–≥–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∏ –∞–Ω–Ω–æ–Ω—Å–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞:
```
[SCHEDULER] Auto-closing expired iteration: –î–µ–∫–∞–±—Ä—å 2024
[ANNOUNCE] –ò—Ç–µ—Ä–∞—Ü–∏—è –î–µ–∫–∞–±—Ä—å 2024: {"winner":"–ö–Ω–∏–≥–∞","votes":15,"addedBy":"user"}
[ANNOUNCE] Message sent to channel
```
